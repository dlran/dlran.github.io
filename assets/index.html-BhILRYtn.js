import{_ as s,c as e,a,o as l}from"./app-CXOWP-6d.js";const d={};function h(n,i){return l(),e("div",null,i[0]||(i[0]=[a(`<h2 id="📌-前置条件" tabindex="-1"><a class="header-anchor" href="#📌-前置条件"><span>📌 前置条件</span></a></h2><ul><li>系统使用 LVM 管理磁盘；</li><li>已添加一块新磁盘（本文假设为 <code>/dev/sdb</code>）；</li><li>已具备 root 权限。</li></ul><hr><h2 id="一、为新磁盘分区" tabindex="-1"><a class="header-anchor" href="#一、为新磁盘分区"><span>一、为新磁盘分区</span></a></h2><p>使用 <code>fdisk</code> 对新磁盘进行分区：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fdisk</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在交互界面中：</p><ol><li>输入 <code>n</code> 创建新分区；</li><li>一路回车使用默认设置；</li><li>输入 <code>w</code> 保存退出。</li></ol><p>让内核重新读取分区表：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">partprobe</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="二、扩展已有的物理卷-可选" tabindex="-1"><a class="header-anchor" href="#二、扩展已有的物理卷-可选"><span>二、扩展已有的物理卷（可选）</span></a></h2><p>如果你已经有一个物理卷，并且这块磁盘是该物理卷的一部分，只是空间变大了，那么只需：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pvresize</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="三、新建物理卷-若为全新设备" tabindex="-1"><a class="header-anchor" href="#三、新建物理卷-若为全新设备"><span>三、新建物理卷（若为全新设备）</span></a></h2><p>如果 <code>/dev/sdb1</code> 是一块新分区，需初始化为物理卷：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pvcreate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检查物理卷信息：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pvdisplay</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pvs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pvscan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="四、扩展卷组" tabindex="-1"><a class="header-anchor" href="#四、扩展卷组"><span>四、扩展卷组</span></a></h2><p>查看已有卷组信息：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vgdisplay</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vgs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>将新建的物理卷加入现有卷组（如 <code>rhel</code>）：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vgextend</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rhel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="五、扩展逻辑卷" tabindex="-1"><a class="header-anchor" href="#五、扩展逻辑卷"><span>五、扩展逻辑卷</span></a></h2><p>首先确认逻辑卷路径，一般可以通过以下命令查看：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lvdisplay</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lvs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后执行扩容命令（有两种方式）：</p><ol><li><p>增加固定大小，例如增加 5G：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lvextend</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -L</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +5G</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/rhel/root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>使用卷组中所有剩余空间：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lvextend</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +100%FREE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/rhel/root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><p>示例输出：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Size of logical volume rhel/root changed from 17.47 GiB (4472 extents) to 22.50 GiB (5761 extents).</span></span>
<span class="line"><span>Logical volume root successfully resized.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="六、扩展文件系统" tabindex="-1"><a class="header-anchor" href="#六、扩展文件系统"><span>六、扩展文件系统</span></a></h2><p>对于使用 XFS 文件系统的根分区，使用 <code>xfs_growfs</code> 进行扩展：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">xfs_growfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/rhel/root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>⚠️ 如果你使用的是 ext4 文件系统，请使用 <code>resize2fs</code> 命令。</p></blockquote><hr><h2 id="✅-总结" tabindex="-1"><a class="header-anchor" href="#✅-总结"><span>✅ 总结</span></a></h2><p>上面的流程基本覆盖了基于 LVM 的磁盘扩容操作核心步骤：</p><ol><li>新增磁盘并分区；</li><li>初始化物理卷；</li><li>加入卷组；</li><li>扩展逻辑卷；</li><li>扩展文件系统。</li></ol><p>这些操作可以帮助你在不影响系统运行的情况下，灵活管理磁盘空间，提高系统的可维护性。</p>`,44)]))}const r=s(d,[["render",h]]),k=JSON.parse('{"path":"/article/8908148a/","title":"LVM 扩展磁盘空间","lang":"zh-CN","frontmatter":{"title":"LVM 扩展磁盘空间","tags":["Linux"],"createTime":"2023/10/24 09:14:36","permalink":"/article/8908148a/"},"readingTime":{"minutes":1.65,"words":496},"git":{},"filePathRelative":"Operations/8908148a.md","headers":[],"categoryList":[{"id":"456d0d","sort":10001,"name":"Operations"}]}');export{r as comp,k as data};
